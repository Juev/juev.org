--- 
layout: post
title: !binary |
  0YHQutCw0L3QtdGAINCyIGFyY2hsaW51eA==

---
<strong>Статья содержит ошибки, публикация по теме с исправлениями находиться <a href="http://www.juev.ru/2009/03/14/skaner-v-archlinux-2/" target="_self">здесь</a>
</strong>

Сегодня вдруг понадобился сканер, до сих пор стоял за ненадобностью и уже не помню, когда последний раз пользовался.

Естественно, что под archlinux его не настраивал... И как раз сегодня, когда он так нужен был, оказалось, что мой сканер из под пользователя не работает.
<!--more--> 
xsane просто выдает сообщение о том, что сканер не обнаружен...
<pre>$ sudo sane-find-scanner</pre>
выдал:
<pre>found USB scanner (vendor=0x04a9 [Canon], product=0x2220 [CanoScan], chip=LM9832/3) at libusb:004:002</pre>

То есть сканер есть и он нормально работает... Попробовал запустить xsane из под рута - все ок, то есть фактически проблема оказывается из-за прав на устройство. Я уже состою в группе scanner, потому было даже странно, что не работает...
Проверил права, что стояли на usb-устройствах. Оказалось, что права у всех устройств были root:root
Очень странно... Поиск у гугле указал на то, что для установки прав на usb-устройства нужно поправить файл <code>/etc/udev/rules.d/53-sane.rules</code>

Так ведь еще и этого файла у меня не оказалось вообще. Пришлось создавать его с нуля и прописывать следующее содержимое:
<pre>#Canon LIDE
ATTRS&#123;idVendor}==04a9 ATTRS&#123;idProduct}==2220
MODE="0664", GROUP="scanner"
ENV&#123;libsane matched}="yes"</pre>

Значение idVendor и idProduct были взяты из вывода команды sane-find-scanner, что показано выше...
После чего перезапускаем машинку и наслаждаемся нормальной работой сканера... Очень странно, что после установки sane и hal (udev), не было создано файла с правилами для сканеров...
