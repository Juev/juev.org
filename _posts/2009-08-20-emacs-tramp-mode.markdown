--- 
layout: post
title: Emacs Tramp-mode
---
Для работы с системными файлами требуются права суперпользователя. Запускать emacs с такими правами - это не правильно. И именно для этого был создан Tramp-mode.

Для его использования достаточно при открытии файла использовать следующий формат записи (жмем Ctrl-x Ctrl-f):

    /sudo::/etc/rc.conf

В данном случае файл <em>/etc/rc.conf</em> будет открыт в режиме sudo. Естественно, пользователю, который в данный момент времени работает с Emacs должны быть предоставлены соответствующие права. После выбора файла будет произведен запрос пароля текущего пользователя.

Так же возможно открывать файлы непосредственно от имени root. Для этого вместо <em>sudo</em> необходимо использовать <em>su</em>, и вводить придется уже не пароль пользователя, а пароль root... Пример:

    /su::/etc/rc.conf

Однако есть некоторая тонкость, ради которой собственно и пишу данную статью. Если в качестве оболочки текущего пользователя используется bash, все работает безукоризненно, но вот если использовать zsh, то использовать sudo уже не получиться...

Об этом пишут на официальной странице <a href="http://www.emacswiki.org/emacs/TrampMode" rel="nofollow">www.emacswiki.org</a> и предлагают варианты решения. Которые правда у меня так и не сработали... В конференции emacs@conference.jabber.ru пользователем <strong>Demyan</strong> было предложено следующее. Прописываем в файл конфигурации <em>.emacs</em> следующую строку:

    (setenv "SHELL" "/bin/sh")

После чего Tramp-mode начинает работать без проблем и с использованием в качестве оболочки zsh.
