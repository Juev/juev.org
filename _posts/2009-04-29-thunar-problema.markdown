--- 
layout: post
title: !binary |
  dGh1bmFyIC0g0L/RgNC+0LHQu9C10LzQsCDRgSB1bW91bnQgY2QvZHZk

---
Еще с прошлого года использую в качестве файлового менеджера программу Thunar. Довольно удобно с ее помощью управлять файлами, и к тому же присутствует функция автоматического монтирования сменных носителей. По сути из-за автомонтирования я и стал использовать <strong>thunar</strong> так активно. Уж больно прельщало то, что достаточно запустить <strong>thunar</strong> в режиме демона и больше нет проблем с присоединением сменных носителей в системе.

Вставил компакт-диск и тут же открывается окно thunar со списком файлов на диске. Просто супер!

Но, как оказалось, не все так безоблачно в датском королевстве... И некоторое время спустя стала появляться ошибка следующего рода: вставляем компакт-диск, он нормально монтируется, нормально работает. Нажимаем кнопку на приводе для извлечения диска - и получаем сообщение от системы, что том не может быть отмонтирован, так как устройство не является томом или приводом. Пришлось искать причину и решение нашлось в пакете <strong>exo-alt</strong>, сам поиск и решение описывал <a href="http://www.juev.ru/2009/01/22/archlinux-avtomontirovanie-diskov/" target="_blank">здесь</a>.
<!--more-->
Но после обновления xfce пакет стал устаревшим и проблема вернулась. Повезло в том, что я привод использую очень редко, поэтому проблема была не очень актуальна. А вчера почему-то достало. И достало очень сильно.

Полез опять в инет искать причину. И возможные варианты решения. Практически все описания сводились к написанию определенных правил для <strong>hal</strong>. Что только не рекомендовали делать. И чего я только не пробовал. Увы, автоматическое монтирование так и не заработало нормально.

Единственно, встретил описание того, как можно вообще отключить автоматическое монтирование конкретно для определенного привода. Статья на <a href="http://wiki.archlinux.org/index.php/HAL" target="_blank">wiki.archlinux</a>, согласно которой достаточно создать файл <code>/etc/hal/fdi/information/media-check-disable-storage_model_$YOUR_DEVICE.fdi</code> со следующим содержимым:
<pre>&lt;deviceinfo version="0.2"&gt;
&lt;device&gt;
&lt;match key="info.udi" string="/org/freedesktop/Hal/devices/storage_model_DV$
&lt;merge key="storage.media_check_enabled" type="bool"&gt;false&lt;/merge&gt;
&lt;/match&gt;
&lt;/device&gt;
&lt;/deviceinfo&gt;</pre>

В моем случае файл получил имя <code>/etc/hal/fdi/information/media-check-disable-storage_model_DVD_RW_ND_3500AG.fdi</code>.

После чего автоматическое монтирование с помощью hal не работает и можно спокойно пользоваться консолью и стандартными утилитами mount/umount. Естественно, что приходиться делать лишние телодвижения, но по крайней мере операция проходит безо всяких проблем.

И только я расслабился, найдя решение проблемы, вдруг решил проверить, а не вышло ли обновление пакета <strong>exo-alt</strong>? А вдруг? Давно ведь не проверял. И чтобы вы думали? Вышло! Со всеми необходимыми патчами. Естественно, сразу же его и поставил, откатив все изменения в правилах для <strong>hal</strong>.

Странно другое, то, что официальный разработчик эти патчи до сих пор не принял в разработку. Проблема ведь существует уже довольно давно. Очень странно.

И большое спасибо разработчикам из <strong>ALTLinux</strong> за решение!
