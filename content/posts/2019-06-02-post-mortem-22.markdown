---
title: "Post Mortem 22 week"
date: "2019-06-02T20:48:00+0300"
tags:
  - review
---
Компания Apple с течением времени скатывается в нечто непотребное. И ранее использовать в корпоративной среде ее продукцией было затруднительно, но обновления, которые ломают технику, это что-то с чем-то.

Началось все с того, что прилетели обновления. Более или менее нормально установились, все хорошо. И на следующий день при попытке включить ноутбук увидел лишь яблоко в центре экрана. Перезагрузка не помогала и приводила лишь к появлению яблока. Удалось провести восстановление системы, после чего работа продолжилась. Ура!

В твиттере указали на ссылку [Повторение пройденного: обновление macOS Mojave разваливает файловую систему](https://blog.fixed.one/?p=35793), в котором указывается на то, что обновление Mojave 10.14.5 при установке на шифрованные диски ломает все к чертям. И приводят решение:

1. Конечно, не паниковать и без резких движений. Не надо ничего форматировать, удалять и тому подобное. Вдохнули, выдохнули и переходим к первому шагу.
1. Перезагружаем машину в режим восстановления. Для этого включаем/перезагружаем ее и держим клавиши «Command+R».
1. Сначала надо определить служебное обозначение раздела, с которым работаем. По сути, обозначение вашего Macintosh HD. Для этого запускаем Дисковую утилиту и находим свой раздел. Возможно, для его показа надо нажать в левом верхнем углу на иконку Вид и выбрать показ всех дисков.
Служебное обозначение находится в правом нижнем углу. Запоминаем его (или записываем). Выходим из Дисковой утилиты.
1. Находим меню «Утилиты» (Utilities), где выбираем команду «Терминал» (Terminal). Запускаем.
1. Теперь начнется работа в текстовом режиме, но не пугайтесь, всё достаточно просто. Для начала попробуем разблокировать раздел, если он зашифрован. Для этого набираем команду

    ```bash
    diskutil apfs unlockvolume disk1s1
    ```

    где disk1s1 — это наш раздел.

    Если диск зашифрован, то он спросит пароль от пользователя — вводим его и еще раз нажимаем Enter.

1. Теперь давайте восстановим работу загрузчика системы. Набираем команду

    ```bash
    diskutil apfs updatePreboot disk1s1
    ```

    и нажимаем Enter. Побежит длинная простыня разного текста, но это нормально. По завершению выходим из Терминала и просто перезагружаем компьютер.

Но инструкцию я прочел уже позже, сам же пошел путем форматирования диска и установки системы с нуля. Система поставилась сразу версии 10.14.5, заработало все как положено. Но теперь приходиться восстанавливать конфигурацию.

Очень помогает уже второй раз программа для создания резервных копий [Arq](https://www.arqbackup.com/). Автоматом создаются резервные копии директорий Documents, Projects и .ssh. Восстановление важной информации проходит быстро.

Что могу сказать, если с ноутом что-то произойдет, то менять его снова на продукцию Apple я уже не стану. Уже присматриваюсь к Dell XPS 13.
